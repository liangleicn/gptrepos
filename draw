import sqlite3
from datetime import datetime, timedelta
import matplotlib.pyplot as plt

# Connect to database
conn = sqlite3.connect('mydatabase.db')
cursor = conn.cursor()

# Get current time
now = datetime.now()

# Set start time to 30 days ago
start_time = now - timedelta(days=30)

# Create list of dates for last 30 days
dates = []
for i in range(30):
    date = start_time + timedelta(days=i)
    dates.append(date.strftime("%Y%m%d"))

# Get data for last 30 days
data = {}
for date in dates:
    cursor.execute(f"SELECT COUNT(*) FROM mytable WHERE boot_time LIKE '{date}%'")
    count = cursor.fetchone()[0]
    data[date] = count

# Plot data
plt.plot(list(data.keys()), list(data.values()))
plt.xlabel('Date')
plt.ylabel('Number of Records')
plt.title('Boot Time Records for Last 30 Days')
plt.show()

# Close connection to database
conn.close()
