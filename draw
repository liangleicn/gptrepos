import sqlite3
from datetime import datetime, timedelta
import matplotlib.pyplot as plt

# connect to the database
conn = sqlite3.connect('mydatabase.db')
c = conn.cursor()

# get the current time
now = datetime.now()

# get the start time and end time for the last 30 days
start_time = now - timedelta(days=29)
end_time = now + timedelta(days=1)

# get the start time and end time for today
today_start_time = datetime(now.year, now.month, now.day)
today_end_time = today_start_time + timedelta(days=1)

# get the data for the last 30 days
c.execute("SELECT boot_time FROM mytable WHERE boot_time >= ? AND boot_time < ?", (start_time.strftime('%Y%m%d%H'), end_time.strftime('%Y%m%d%H')))
data = c.fetchall()

# count the number of records for each hour
hours = [i for i in range(24)]
counts = [0] * 24
for row in data:
    boot_time = datetime.strptime(row[0], '%Y%m%d%H')
    hour = (boot_time - start_time).days * 24 + (boot_time - start_time).seconds // 3600
    counts[hour] += 1

# plot the trend chart for the last 30 days
fig, ax = plt.subplots()
ax.plot(hours, counts)
ax.set_xticks(hours)
ax.set_xlabel('Day')
ax.set_ylabel('Number of Records')
ax.set_title('Trend for the last 30 days')

# get the data for today
c.execute("SELECT boot_time FROM mytable WHERE boot_time >= ? AND boot_time < ?", (today_start_time.strftime('%Y%m%d%H'), today_end_time.strftime('%Y%m%d%H')))
data = c.fetchall()

# count the number of records for each hour
hours = [i for i in range(24)]
counts = [0] * 24
for row in data:
    boot_time = datetime.strptime(row[0], '%Y%m%d%H')
    hour = boot_time.hour
    counts[hour] += 1

# plot the trend chart for today
fig, ax = plt.subplots()
ax.plot(hours, counts)
ax.set_xticks(hours)
ax.set_xlabel('Hour')
ax.set_ylabel('Number of Records')
ax.set_title('Trend for Today')

# show the plots
plt.show()

# close the database connection
conn.close()
