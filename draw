import sqlite3
import datetime
import matplotlib.pyplot as plt

# Database connection
conn = sqlite3.connect('mydatabase.db')
c = conn.cursor()

# Get current datetime
now = datetime.datetime.now()

# Get datetime 7 days ago
seven_days_ago = now - datetime.timedelta(days=7)

# SQL query to get records for last 7 days
query = "SELECT boot_time FROM mytable WHERE boot_time >= ?"
data = (seven_days_ago.strftime('%Y%m%d%H'),)
c.execute(query, data)

# Count records per hour
counts = [0] * 24
for row in c.fetchall():
    hour = int(row[0][-2:])
    counts[hour] += 1

# Create plot
hours = [i for i in range(24)]
plt.plot(hours, counts)

# Set plot labels
plt.xlabel('Hour')
plt.ylabel('Number of Records')
plt.title('Number of Records per Hour for Last 7 Days')

# Show plot
plt.show()

# Close database connection
conn.close()
